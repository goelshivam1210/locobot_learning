# Agent System Overview

This repository contains the code for a hybrid agent system integrating PDDL planning and reinforcement learning. Below is an overview of the key components, their relationships, and how they fit into the overall system.

## Directory Structure

```plaintext
.
├── core
│   ├── Agent.py
│   ├── HybridAgent.py
│   ├── PDDLActions.py
│   ├── PDDLPredicates.py
│   ├── __init__.py
│   ├── learner
│   │   └── __init__.py
│   └── planner
│       ├── RecycleBotPlanner.py
│       ├── __init__.py
│       └── planner.py
├── tests
│   ├── test_hybrid_agent.py
│   └── test_planner.py

```

## Core Components

### 1. `Agent.py`
This file contains the `Agent` class, which is responsible for executing the plan generated by the planner. It checks preconditions and effects for each action and interacts with the `PDDLActions` and `PDDLPredicates` classes to perform these checks.

### 2. `HybridAgent.py`
The `HybridAgent` class extends the functionality of the `Agent` class by adding the ability to handle failures. If a plan fails during execution, the `HybridAgent` can enter a recovery mode, where it may use a learning mechanism (like PPO) to adapt and retry the plan.

### 3. `PDDLActions.py`
This file contains the `PDDLActions` class, which is responsible for executing the actions specified in the PDDL plan. Each action corresponds to a method in this class.

### 4. `PDDLPredicates.py`
The `PDDLPredicates` class contains methods for checking the preconditions and effects of actions. It interacts with the environment (or in a ROS context, with the ROS services) to validate whether certain conditions hold true.

### 5. `planner/planner.py`
This is the core planning module that interfaces with the PDDL domain and problem files. It parses the domain, generates problem strings, and interacts with the PDDL planner to create executable plans. This class also handles precondition and effect verification.

### 6. `planner/RecycleBotPlanner.py`
The `RecycleBotPlanner` class is a specialized planner that extends the base `Planner` class to handle specific cases related to the recycle bot domain. It builds on the core planning logic and adapts it for the specific needs of the recycle bot.


## Test Files

### 1. `tests/test_planner.py`
This script tests the core planning functionality by generating a plan and ensuring that it can be executed step by step.

### 2. `tests/test_hybrid_agent.py`
This script tests the `HybridAgent` class, ensuring that it can execute a plan, handle failures, and potentially enter a recovery mode.

## Usage

To run the tests, navigate to the `tests` directory and use the following commands:

```bash
python test_planner.py
```


```bash
python test_hybrid_agent.py
```
